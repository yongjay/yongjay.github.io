<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>spdlog源码阅读（0）：示例代码分析</title>
      <link href="/2023/12/09/spdlog-1/"/>
      <url>/2023/12/09/spdlog-1/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/gabime/spdlog">spdlog</a>是开源社区比较有名的跨平台的c++日志库，即支持<code>head-only</code>也支持编译为库，本文是spdlog源码阅读的第一篇。</p><p>代码下载和编译在仓库中有详细的讲解，此处不再赘述，编译完成之后运行示例代码如图：</p><p><img src="/../images/spdlog-1/Screenshot%202023-12-09%20at%2019.40.18.png" alt="Screenshot 2023-12-09 at 19.40.18"></p><p>可以看到，颜色比较丰富，也支持自定义消息输出格式。另外，spdlog支持使用tcp和udp发送log到远程主机，示例代码中加入了udp测试的log，可以使用nc命令启动一个服务器来验证，端口号为11091，结果如下：</p><p><img src="/../images/spdlog-1/Screenshot%202023-12-09%20at%2020.20.59.png" alt="Screenshot 2023-12-09 at 20.20.59"></p><p>项目本身的示例没有输出到tcp的例子，可以写一个用来初步熟悉spdlog的使用，在spdlog&#x2F;example&#x2F;example.cpp中增加如下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;spdlog/sinks/tcp_sink.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">tcp_example</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    spdlog::<span class="function">sinks::tcp_sink_config <span class="title">cfg</span><span class="params">(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">11092</span>)</span></span>;</span><br><span class="line">    <span class="keyword">auto</span> my_logger = spdlog::<span class="built_in">tcp_logger_mt</span>(<span class="string">&quot;tcplog&quot;</span>, cfg);</span><br><span class="line">    my_logger-&gt;<span class="built_in">set_level</span>(spdlog::level::debug);</span><br><span class="line">    my_logger-&gt;<span class="built_in">info</span>(<span class="string">&quot;hello tcp logger&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在spdlog&#x2F;include&#x2F;spdlog&#x2F;sinks&#x2F;tcp_sink.h中命令spdlog命名空间之内sinks命名空间以外增加以下代码：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Factory = spdlog::synchronous_factory&gt;</span><br><span class="line"><span class="keyword">inline</span> std::shared_ptr&lt;logger&gt; <span class="built_in">tcp_logger_mt</span>(<span class="type">const</span> std::string &amp;logger_name,</span><br><span class="line">                                             sinks::tcp_sink_config skin_config) &#123;</span><br><span class="line">    <span class="keyword">return</span> Factory::<span class="keyword">template</span> <span class="built_in">create</span>&lt;sinks::tcp_sink_mt&gt;(logger_name, skin_config);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中，cfg用来配置tcp的ip和端口，tcp_logger_mt是一个工厂函数，用来生成logger对象，参数是logger的名字以及tcp的配置，create是一个构建同步logger的工厂函数，会在后面的文章中详细分析。</p><p>编译之后（以上代码省略了主函数的调用），使用nc命令模拟tcp服务器接受log，结果如下：</p><p><img src="/../images/spdlog-1/Screenshot%202023-12-09%20at%2020.51.53.png" alt="Screenshot 2023-12-09 at 20.51.53"></p><p>spdlog提供了默认的logger，可以直接通过<code>spdlog::info</code>或者<code>spdlog::debug</code>等等使用默认的logger直接输出需要的log。此外，spdlog也提供了丰富的编译选项，可以通过在CMakeLists文件中来打开选择配置。</p><p>之后的文章会介绍spdlog的总体设计、一些基础模块等等。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 源码阅读 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023读书书单</title>
      <link href="/2023/11/26/notes-of-reading/"/>
      <url>/2023/11/26/notes-of-reading/</url>
      
        <content type="html"><![CDATA[<h3 id="《C-之旅》"><a href="#《C-之旅》" class="headerlink" title="《C++之旅》"></a>《C++之旅》</h3><p>本书是C++之父2023年的新作，包含了C++20标准，总览了C++的重要语言特性，每章开头的小标题会引用一些其他人（也有作者自己）的话来引入该章节的主题，细细体会很有意思，每章结尾也会给出一些建议，以一些比较短又发人深思的话提炼出大师推荐的最佳实践（来源于作者的另外一本书《C++ Core Guidelines》,作者在建议中给出了索引，有兴趣可以直接查阅），读完很有收获。如果你是一名有经验的c++程序员，想要复习一下C++或者想要了解一下新的特性，那么这本书非常适合你！</p><p>每章开头的引语和章节内容</p><blockquote><p>第一章：基础 <strong>“我们的首要任务是，干掉所有语言专家！” —–《亨利六世》的第二部分</strong></p><p>第二章：用户自定义类型 <strong>“不必惊慌！”—–道格拉斯·亚当斯</strong></p><p>第三章：模块化 <strong>“管好你自己的事！”—–道格拉斯·亚当斯</strong></p><p>第四章：错误处理 <strong>“我打断你的时候不许打断我。”—–温斯顿·丘吉尔</strong></p><p>第五章：类 <strong>“那些类型一点也不‘抽象’；它们如此真实，就像int和float一样。”—–道格·麦克罗伊</strong></p><p>第六章：基本操作<strong>“我想一种只需要口头许愿出想要做的事就能实现的编程语言。那么，给他一根棒棒糖吧。”—–艾伦·佩里斯</strong></p><p>第七章：模板<strong>“你的畅所欲言之地。”—–本贾尼·斯特劳斯特鲁普</strong></p><p>第八章：概念和泛型编程 <strong>“编程：你必须从有趣的算法开始。”—–Alex Stepanov</strong></p><p>第九章：标准库 <strong>“当无知稍纵即逝时，又何必浪费时间学习呢？”—–霍布斯</strong></p><p>第十章：字符串和正则表达式 <strong>“优先选择标准而非另类。”—–斯特伦克&amp;怀特</strong></p><p>第十一章：输入与输出 <strong>“所见即所得。”—–布莱恩·克尼汉</strong></p><p>第十二章：容器 <strong>“它新颖、独一无二、简单，它必须成功！”—–H·尼尔森</strong></p><p>第十三章：算法 <strong>“若无必要，勿增实体。”—–威廉·奥卡姆</strong></p><p>第十四章：范围 <strong>“只要结论没有被实践验证，最有力的论点也证明不了什么。”—–罗吉尔·培根</strong></p><p>第十五章：指针和容器 <strong>“教育就是做什么，什么时候做，为什么做。训练就是如何去做。”—–理查德·卫斯理·汉明</strong></p><p>第十六章：实用工具 <strong>“能在浪费时间中获得乐趣，就不是浪费时间。” —–伯特兰·罗素</strong></p><p>第十七章：数值计算 <strong>“计算的意义在于洞察力，而非数字本身。”—–理查德·卫斯理·汉明</strong></p><p>​<strong>“……但是对于学生而言，数字是培养洞察力最好的途径。”—–A·罗尔斯顿</strong></p><p>第十八章：并发 <strong>“保持简单：尽可能的简单，但不要过度简化。”—–A·爱因斯坦</strong></p><p>第十九章：历史和兼容性 <strong>“慢慢来！” —–凯撒·奥古斯都</strong></p></blockquote><p>以上。</p><h3 id="《The-Way-To-Go》"><a href="#《The-Way-To-Go》" class="headerlink" title="《The Way To Go》"></a>《The Way To Go》</h3><h3 id="《1984》"><a href="#《1984》" class="headerlink" title="《1984》"></a>《1984》</h3><p>作者是乔治奥威尔，构造了一个虚拟的社会，描述了主角温斯顿在政治重压下如何保持自己的人性里面有一句比较有名的话：“老大哥在看着你。”整本书看完引发了很多思考，对理解社会的本质有帮助，马伯庸曾经写过一篇类似的文章，大概是在2005年写的，如果你喜欢这本书，那么这篇文章也推荐看。另外值得一提的是，苹果公司曾经根据此书中的情节推出了Macintosh的广告。</p><h3 id="《史蒂夫·乔布斯传》"><a href="#《史蒂夫·乔布斯传》" class="headerlink" title="《史蒂夫·乔布斯传》"></a>《史蒂夫·乔布斯传》</h3><p>很遗憾今年才看到本书，作者以一个客观的视角描述了乔布斯不凡的一生，乔布斯不是一个完美的人，极端情绪化、控制欲极强，以及他的“现实扭曲力场”，不过正是这些铸造了早期苹果公司的文化、价值观以及对产品的态度（但这不代表苹果公司没有离谱的设计）。作为一个喜欢使用苹果产品的人，我喜欢苹果产品的统一性带来的美感，以及对细节的把控。这本书是在微信读书看的，从这本书的划线笔记中看到一些有意思的评论，有对乔布斯无脑吹的，也有无脑黑的，觉得实在大可不必，没有人是完美的。</p><h3 id="《嫌疑人X的献身》"><a href="#《嫌疑人X的献身》" class="headerlink" title="《嫌疑人X的献身》"></a>《嫌疑人X的献身》</h3><h3 id="《2001：太空漫游》"><a href="#《2001：太空漫游》" class="headerlink" title="《2001：太空漫游》"></a>《2001：太空漫游》</h3><h3 id="《太白金星有点烦》"><a href="#《太白金星有点烦》" class="headerlink" title="《太白金星有点烦》"></a>《太白金星有点烦》</h3><h3 id="《解忧杂货店》"><a href="#《解忧杂货店》" class="headerlink" title="《解忧杂货店》"></a>《解忧杂货店》</h3><h3 id="《沧浪之水》"><a href="#《沧浪之水》" class="headerlink" title="《沧浪之水》"></a>《沧浪之水》</h3>]]></content>
      
      
      
        <tags>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac开发环境搭建</title>
      <link href="/2023/07/23/dev-config/"/>
      <url>/2023/07/23/dev-config/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>刚从WSL下切换到Mac，记录一下Mac平台下的开发环境搭建</p><h3 id="命令行工具"><a href="#命令行工具" class="headerlink" title="命令行工具"></a>命令行工具</h3><p>Mac自带的终端工具特性比较少，这里推荐使用Iterm2作为替代，支持不同的主题配色，以及丰富的分屏和显示效果。Mac上默认的shell是zsh，推荐安装<a href="https://github.com/ohmyzsh/ohmyzsh">oh-my-zsh</a>作为命令行工具，oh-my-zsh有丰富的主题以及插件，能够大大增加命令行下的工作效率，也可以配置出很好看的终端效果:</p><p><img src="/images/dev-config/image-20230723123027340.png" alt="image-20230723123027340"> </p><p>这里使用的主题是<a href="https://github.com/romkatv/powerlevel10k">powerlevel10k</a> ，有两个比较好用的插分别是命令高亮<a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a>和命令补全<a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a>，这两个插件也是一些教程中推荐最多的，实际用下来确实很好用，使用方法参考主题官方文档以及插件官方文档。</p><h3 id="软件管理工具"><a href="#软件管理工具" class="headerlink" title="软件管理工具"></a>软件管理工具</h3><p>使用<a href="https://brew.sh/">brew</a>作为Mac下的包管理工具，brew官网给出了安装命令，但是在国内的网络环境下安装大概率会由于网络问题安装失败，可使用如下命令安装brew：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e &quot;$(curl -fsSL https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install)&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上午脚本会自动替换中科大的源，不需要再手动替换软件下载源，安装好之后使用brew安装tree工具：</p><p><img src="/images/dev-config/image-20230723124702271.png" alt="image-20230723124702271"></p><h3 id="编译工具Xcode"><a href="#编译工具Xcode" class="headerlink" title="编译工具Xcode"></a>编译工具Xcode</h3><p>Mac下如果要使用gcc、make、clang等工具需要安装Xcode工具包，如果你不是ios或者macos等Apple平台的开发者，仅仅想要使用一些命令行工具来做开发，那么推荐安装更小的Xcode Command Line Tools，可使用如下命令安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select –install</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hello blog</title>
      <link href="/2023/07/23/first-post/"/>
      <url>/2023/07/23/first-post/</url>
      
        <content type="html"><![CDATA[<h3 id="关于博客本身"><a href="#关于博客本身" class="headerlink" title="关于博客本身"></a>关于博客本身</h3><p>新的博客搭建好了，用的框架是Hexo，托管在GitHub上，这样做的好处是不用去走复杂的备案工作，虽然牺牲了访问速度，但访问量不大，所以可以接受。主题使用的是<a href="https://github.com/probberechts/hexo-theme-cactus">cactus</a>，一个比较简洁的主题。</p><h3 id="为什么要写"><a href="#为什么要写" class="headerlink" title="为什么要写"></a>为什么要写</h3><p>刘未鹏老师有一篇文章<a href="http://mindhacks.cn/2009/02/15/why-you-should-start-blogging-now/">为什么你应该（从现在开始就）写博客</a>：</p><blockquote><p><strong>写一个博客有很多好处，却没有任何明显的坏处</strong>。</p><p><strong>用博客的形式来记录下你有价值的思考，会带来很多好处，却没有任何明显的坏处</strong>。</p></blockquote><p>文中列举了写博客的具体好处以及可能会遇到的一些问题并给出了解决方案，非常值得阅读</p><h3 id="关于内容"><a href="#关于内容" class="headerlink" title="关于内容"></a>关于内容</h3><p>主要以技术文章为主，可能也会有一些读书笔记。</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
